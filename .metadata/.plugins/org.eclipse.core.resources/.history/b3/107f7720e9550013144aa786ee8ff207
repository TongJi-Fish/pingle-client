package com.app.ipinle.util;

import org.apache.http.client.HttpClient;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpConnectionParams;
import org.apache.http.params.HttpParams;
import org.apache.http.protocol.HTTP;

import com.app.ipinle.base.C;

public class AppClient {

	// compress strategy
	final private static int CS_NONE = 0;
	final private static int CS_GZIP = 1;
		
	// logic variables
	private String apiUrl;
	private HttpParams httpParams;
	private HttpClient httpClient;
	private int timeoutConnection = 10000;
	private int timeoutSocket = 10000;
	private int compress = CS_NONE;
	
	// charset default utf8
	private String charset = HTTP.UTF_8;
	
	public AppClient(String url){
		initClient(url);
	}
	public AppClient(String url,String charset, int compress){
		initClient(url);
		this.charset = charset;
		this.compress = compress;
	}
	
	public void initClient(String url){
		// initialize API URL
		this.apiUrl = C.api.base + url;
		String apiSid = AppUtil.getSessionId();
		if(apiSid != null && apiSid.length()>0){
			this.apiUrl += "?sid=" + apiSid;
		}
		// set client timeout
		httpParams = new BasicHttpParams();
		HttpConnectionParams.setConnectionTimeout(httpParams, timeoutConnection);
		HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
		
	}
}
